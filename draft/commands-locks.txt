:orphan:

==================
Commands and Locks
==================

.. default-domain:: mongodb

This table is drawn from a review of the MongoDB source, specifically looking for
the presence of: 

.. code-block:: c

      virtual LockType locktype() const { return WRITE; }
      virtual bool lockGlobally() const { return true; }


.. TODO::
   add admin db requirements
   add slave ok
   add auth required

+---------------------------------------------------------+-----------+--------+-------+
| Command                                                 | Lock Type | Scope  | Admin |
+=========================================================+===========+========+=======+
| :dbcommand:`_hashBSONElement`                           |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`_isSelf`                                    |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`_recvChunkStart`                            | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`applyOps`                                   | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`authenticate`                               |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
|:dbcommand:`availableQueryOptions`, availablequeryoptions|           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`buildInfo`, :dbcommand:`buildinfo`          |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`captrunc`                                   | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`checkShardingIndex`                         |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`clean`                                      | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`cloneCollectionAsCapped`                    | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`cloneCollection`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`clone`                                      | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`closeAllDatabases`                          | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`cloud`                                      |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`collMod`                                    | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`collStatus`, :dbcommand:`collstats`         | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`compact`                                    |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`connPoolStats`                              |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`connPoolSync`, :dbcommand:`connpoolsync`    |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`convertToCapped`                            | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`copydbgetnonce`                             | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`copydb`                                     |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`count`                                      | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`create`                                     | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`cursorInfo`                                 |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`dataSize`, :dbcommand:`datasize`            | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`dbHash`, :dbcommand:`dbhash`                | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`dbStats`, :dbcommand:`dbstats`              | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`diagLogging`                                | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`dropDatabase`                               | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`dropIndexes` , :dbcommand:`deleteIndexes`   | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`drop`                                       | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`emptycapped`                                | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`eval`                                       |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`features`                                   |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`filemd5`                                    | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`findAndModify`, :dbcommand:`findandmodify`  | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`forceerror`                                 |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`fsync`                                      | ?         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`geoNear`                                    | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`geoSearch`                                  | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`geoWalk`                                    | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getCmdLineOpts`                             | NONE      |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getLastError`, :dbcommand:`getlasterror`    |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getLog`                                     |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getParameter`                               |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getPreverror`, :dbcommand:`getpreverror`    |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getShardMap`                                |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getShardVersion`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getnonce`                                   |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`getoptime`                                  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`godinsert`                                  | NONE      |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`group`                                      | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`handshake`                                  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`hostInfo`                                   |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`isMaster`,ismaster                          |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`isdbgrid`                                   |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`journalLatencyTest`                         |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`listCommands`                               |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`listDatabases`, :dbcommand:`listdatabases`  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`logRotate`                                  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`logout`                                     |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`mapReduce`, :dbcommand:`mapreduce`          |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`medianKey`                                  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`moveChunk`                                  |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`ping`                                       |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`reIndex`                                    | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`renameCollection`                           | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`repSetGetStatus`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`repairDatabase`                             | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetFreeze`                              |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetGetRBID`                             |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetGetStatus`                           |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetInitiate`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetMaintenance`                         |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetReconfig`  (note: mutex-rsreconfig)  | R/W Mutex |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetStepDown`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetSyncFrom`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`replSetTest`                                |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`resetError`, :dbcommand:`reseterror`        |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`resync`                                     | W         | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`serverStatus`                               |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`setParameter`                               |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`setShardVersion`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`shardingState`                              | W         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`sleep`                                      | R or W    | global |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`splitChunk`                                 |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`splitVector`                                |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`top`                                        | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`touch`                                      |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`unsetSharding`                              |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`validate`                                   | R         |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`whatsmyuri`                                 |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`writeBacksQueued`                           |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
| :dbcommand:`writebacklisten`                            |           |        |       |
+---------------------------------------------------------+-----------+--------+-------+
