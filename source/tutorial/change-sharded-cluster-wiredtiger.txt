====================================
Change Sharded Cluster to WiredTiger
====================================

.. default-domain:: mongodb

Starting in version 3.2, WiredTiger is the default storage engine for
MongoDB. Use this tutorial to update your 3.2 sharded clusters to use
:ref:`WiredTiger <storage-wiredtiger>`.

To convert a 3.0 sharded cluster that uses MMAPv1, see the
:v3.0:`MongoDB 3.0 manual
</release-notes/3.0-upgrade/#change-sharded-cluster-storage-engine-to-wiredtiger>`.
 

Considerations
--------------

Downtime
~~~~~~~~

This procedure may involve downtime, especially if one or more of your
shards is a :term:`standalone`. If you change the host or port of any
:term:`shard`, you must update the shard configuration as well.

MongoDB 3.0 or Greater
~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/fact-wiredtiger-minimum-version.rst

Change Shards to WiredTiger
---------------------------

.. note::

   A sharded cluster **can** have mixed storage engines for its
   individual shards.

To change the storage engine for the :term:`shards <shard>` to
WiredTiger, refer to the appropriate procedure for each shard:

- If the shard is a :term:`standalone`, see
  :doc:`/tutorial/change-standalone-wiredtiger`.

- If the shard is a :term:`replica set`, see
  :doc:`/tutorial/change-replica-set-wiredtiger`.

Change Config Servers to WiredTiger
-----------------------------------

CSRS
~~~~

Starting in MongoDB 3.2, config servers can be :ref:`deployed as
replica sets <3.2-rel-notes-sharded-cluster>`. If the config servers
are deployed as a :ref:`replica set (CSRS)
<3.2-rel-notes-sharded-cluster>`, the config servers already use
WiredTiger.

Mirrored ``mongod`` Instances
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the config servers are deployed as 3 mirrored :binary:`~bin.mongod`
instances, see :doc:`/tutorial/change-config-server-wiredtiger` to
change the storage engines of these config servers.

.. include:: /includes/fact-config-server-storage-engine-mix.rst


.. class:: hidden

   .. toctree::
      :titlesonly:

      /tutorial/change-config-server-wiredtiger.txt
