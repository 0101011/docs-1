====================================
Change Sharded Cluster to WiredTiger
====================================

.. default-domain:: mongodb

Starting in version 3.2, WiredTiger is the default storage engine
for MongoDB.

Use this tutorial to update MongoDB 3.4 sharded clusters to use
:ref:`WiredTiger <storage-wiredtiger>`.

For earlier versions of MongoDB:

- To convert a 3.2 sharded cluster that uses MMAPv1, see the
  :v3.2:`MongoDB 3.2 manual
  </tutorial/change-sharded-cluster-wiredtiger>`.

- To convert a 3.0 sharded cluster that uses MMAPv1, see the
  :v3.0:`MongoDB 3.0 manual
  </release-notes/3.0-upgrade/#change-sharded-cluster-storage-engine-to-wiredtiger>`.

Considerations
--------------

Downtime
~~~~~~~~

This procedure may involve downtime, especially if one or more of your
shards is a :term:`standalone`. If you change the host or port of any
:term:`shard`, you must update the shard configuration as well.

MongoDB 3.0 or Greater
~~~~~~~~~~~~~~~~~~~~~~

.. container:: admonition

   .. include:: /includes/fact-wiredtiger-minimum-version.rst

Config Servers
~~~~~~~~~~~~~~

Starting in version 3.4, config servers must be :ref:`deployed as
replica sets (CSRS) <3.4-remove-sccc>`. As such, version 3.4+ config
servers already use the WiredTiger storage engine.

XFS and WiredTiger
~~~~~~~~~~~~~~~~~~

With the WiredTiger storage engine, using XFS for data bearing nodes is
recommended on Linux. For more information, see
:ref:`prod-notes-linux-file-system`.

Change Shards to WiredTiger
---------------------------

.. note::

   A sharded cluster **can** have mixed storage engines for its
   individual shards.

To change the storage engine for the :term:`shards <shard>` to
WiredTiger, refer to the appropriate procedure for each shard:

- If the shard is a :term:`standalone`, see
  :doc:`/tutorial/change-standalone-wiredtiger`.

- If the shard is a :term:`replica set`, see
  :doc:`/tutorial/change-replica-set-wiredtiger`.
