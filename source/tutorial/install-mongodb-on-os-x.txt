=======================
Install MongoDB on OS X
=======================

.. default-domain:: mongodb

.. admonition:: Platform Support

   MongoDB only supports OS X versions 10.6 (Snow Leopard) on Intel
   x86-64 and later.

   .. versionchanged:: 2.4

MongoDB is available through the MongoDB Download site or through the
popular OS X package managers `Homebrew
<http://mxcl.github.com/homebrew/>`_ and `MacPorts
<http://www.macports.org/>`_


Install MongoDB
---------------

Download from MongoDB Site
~~~~~~~~~~~~~~~~~~~~~~~~~~

#. Open a terminal session.

#. To download the latest release, type the following command at the
   system prompt:

   .. include:: /includes/install-curl-release-osx-x86_64.rst

#. Extract the files from the downloaded archive: 

   .. code-block:: sh

      tar -zxvf mongodb.tgz

   The extracted folder has the name
   :file:`mongodb-osx-86_64-[version]`.

   You can find the :program:`mongod` binary, as well as all the other
   binaries associated MongoDB utilities, in the ``bin/`` directory within
   the archive.

#. Optional. To move the extracted folder into another location, issue the following
   command at the system prompt:

   .. code-block:: sh

      mv -n mongodb-osx-x86_64-[version]/ /path/to/new/location/

#. Optional. To ensure that the downloaded binaries are in your
   ``PATH``, you can modify your ``PATH`` and/or create symbolic links
   to the MongoDB binaries in your :file:`/usr/local/bin` directory
   (file:`/usr/local/bin` is already in your ``PATH``).

Install MongoDB with Package Management
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Both community package management tools: `Homebrew
<http://mxcl.github.com/homebrew/>`_ and `MacPorts
<http://www.macports.org/>`_ require some initial setup and
configuration. This configuration is beyond the scope of this
document. You only need to use one of these tools.

If you want to use package management, and do not already have a
system installed, Homebrew is typically easier and simpler to use.

Homebrew
````````

Homebrew installs binary packages based on published "formula." The
following commands will update ``brew`` to the latest packages and
install MongoDB.

#. Open a terminal session.

#. To update ``brew`` to the latest packages and install MongoDB, type
   at the system prompt:

   .. code-block:: sh

      brew update
      brew install mongodb

Later, if you need to upgrade MongoDB, you can issue the following
sequence of commands to update the MongoDB installation on your system:

.. code-block:: sh

   brew update
   brew upgrade mongodb

MacPorts
````````

MacPorts distributes build scripts that allow you to easily build
packages and their dependencies on your own system. The compilation
process can take significant period of time depending on your system's
capabilities and existing dependencies. 

#. Open a terminal session.

#. Issue the following command in the system shell.

   .. code-block:: sh

      port install mongodb

Run MongoDB
-----------

Set Up the Data Directory
~~~~~~~~~~~~~~~~~~~~~~~~~

Before you start :program:`mongod` for the first time, you will need to
create the data directory. By default, :program:`mongod` writes data to
the ``/data/db/`` directory. To create this directory, and set the
appropriate permissions use the following commands:

.. code-block:: sh

   sudo mkdir -p /data/db
   sudo chown `id -u` /data/db

You can specify an alternate path for data files using the
:option:`--dbpath <mongod --dbpath>` option to :program:`mongod`.
Ensure that the alternate directory has the appropriate permissions.

Start MongoDB
~~~~~~~~~~~~~

To start :program:`mongod`, run the executable :program:`mongod` at the
system prompt.

For example, if your ``PATH`` includes the location of the
:program:`mongod` binary, type ``mongod`` at the system prompt.

.. code-block:: sh

   mongod

If your ``PATH`` does not include the location of the :program:`mongod`
binary, type the full path to the :program:`mongod` binary.

The above :program:`mongod` instance writes data to the ``/data/db/``
directory. To specify an alternate data directory, start
:program:`mongod` with the :option:`--dbpath <mongod --dbpath>` option:

.. code-block:: sh

   mongod --dbpath <some alternate directory>

Stop MongoDB
~~~~~~~~~~~~

To stop the :program:`mongod` instance, press ``Control+C``.
