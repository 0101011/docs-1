=======================
Install MongoDB on OS X
=======================

.. default-domain:: mongodb

.. admonition:: Platform Support

   MongoDB only supports OS X versions 10.6 (Snow Leopard) on Intel
   x86-64 and later.

   .. versionchanged:: 2.4


MongoDB is available through the MongoDB Download site or through the popular
OS X package mangers homebrew and macports.

Manual Installation
-------------------

Download and Extract MongoDB
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In a terminal session, begin by downloading the latest release. Use
the following command at the system prompt:

.. include:: /includes/install-curl-release-osx-x86_64.rst

Once you've downloaded the release, issue the following command to
extract the files from the archive:

.. code-block:: sh

   tar -zxvf mongodb.tgz

You can find the :program:`mongod` binary, and the binaries all of the
associated MongoDB utilities, in the ``bin/`` directory within the
archive.

Preparing MongoDB for First Use
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Before you start :program:`mongod` for the first time, you will need
to create the data directory. By default, :program:`mongod` writes
data to the ``/data/db/`` directory. To create this directory, and set
the appropriate permissions use the following commands:

.. code-block:: sh

   sudo mkdir -p /data/db
   sudo chown `id -u` /data/db

You can specify an alternate path for data files using the
:option:`--dbpath <mongod --dbpath>` option to :program:`mongod`.

Place MongoDB in Your Path
~~~~~~~~~~~~~~~~~~~~~~~~~~~

As you have only downloaded a binary, it will not automatically be in
your path. For ease of use you may wish to modify your path, and/or create
symbolic links to the MongoDB programs in your ``/usr/local/bin``
directory.

The following command demonstrates how to move the extracted folder into
a more accessible location.

.. code-block:: sh

  mv -n mongodb-osx-x86_64-[version]/ /path/to/new/location/


Install MongoDB with Package Management
---------------------------------------

Both community package management tools: `Homebrew
<http://mxcl.github.com/homebrew/>`_ and `MacPorts
<http://www.macports.org/>`_ require some initial setup and
configuration. This configuration is beyond the scope of this
document. You only need to use one of these tools.

If you want to use package management, and do not already have a
system installed, Homebrew is typically easier and simpler to use.

Homebrew
~~~~~~~~

Homebrew installs binary packages based on published "formula." The
following commands will update ``brew`` to the latest packages and
install MongoDB:

.. code-block:: sh

   brew update
   brew install mongodb

Later, if you need to upgrade MongoDB, you can issue the following
sequence of commands to update the MongoDB installation on your
system:

.. code-block:: sh

   brew update
   brew upgrade mongodb

MacPorts
~~~~~~~~

MacPorts distributes build scripts that allow you to easily build
packages and their dependencies on your own system. The compilation
process can take significant period of time depending on your system's
capabilities and existing dependencies. Issue the following command in
the system shell:

.. code-block:: sh

   port install mongodb


Controlling MongoDB
-------------------

Regardless of which installation approach you took, the OS X MongoDB
installation doesn't include any :term:`control scripts <control
script>` or method to control the :program:`mongod` process.

You may wish to create control scripts to manage starting and stopping
MongoDB.

For testing purposes, you can start a :program:`mongod` directly in
the terminal without creating a control script:

.. code-block:: sh

   mongod --config /etc/mongod.conf

.. note::

   This command assumes that the :program:`mongod` binary is
   accessible via your system's search path. You may use modified form
   to invoke any :program:`mongod` binary. Furthermore, the command
   assumes that you have created a default configuration file located
   at ``/etc/mongod.conf``.

   See :doc:`/administration/configuration` for more information on
   the format of configuration files.


Using MongoDB
-------------

If you followed all the installation steps correctly, the MongoDB
applications should be accessible from the system shell. Start the
:program:`mongod` process in a terminal (for testing or development) or
using a process management tool.

.. code-block:: sh

   mongod

Then open the :program:`mongo` shell by issuing the
following command at the system prompt:

.. code-block:: sh

   mongo

This will connect to the database running on the localhost interface
by default. At the :program:`mongo` prompt, issue the following two
commands to insert a record in the "test" :term:`collection` of the
(default) "test" database and then retrieve that record.

.. code-block:: javascript

   > db.test.save( { a: 1 } )
   > db.test.find()

.. seealso:: :program:`mongo` and :doc:`/reference/method`

