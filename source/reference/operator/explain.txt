========
$explain
========

.. default-domain:: mongodb

.. operator:: $explain

   :operator:`$explain` operator provides information on the query plan.
   
   It returns a :ref:`document <explain-output>` that describes the
   process and indexes used to return the query. This may provide
   useful insight when attempting to optimize a query. 

   Retrieve the query plan by adding the :operator:`$explain` operator
   to a :method:`find() <db.collection.find()>` query, as in the
   following example:

   .. code-block:: javascript

       db.collection.find()._addSpecial( "$explain", 1 )

   :program:`mongo` shell also provides a wrapper method
   :method:`explain() <cursor.explain()>` for the :operator:`$explain`
   operator:

   .. code-block:: javascript

      db.collection.find().explain()

   :operator:`$explain` runs the actual query to determine the result.
   If the query is slow, the :operator:`$explain` will also be slow.
   Additionally, when you call the explain on a query, the query system
   reevaluates the query plan, which may cause some queries to run
   slower. As a result, these operations provide an accurate account of
   *how* MongoDB would perform the query, but not necessarily *how
   long* the query would take.

   .. _explain-output:

   Consider the following sample output from :operator:`$explain`
   operator:

   .. include:: /includes/fact-explain-output-fields.rst

   .. seealso:: 
   
      - :method:`cursor.explain()`
      
      - :wiki:`Optimization` wiki page for information regarding
        optimization strategies.

      - :wiki:`Database Profiler` wiki page for information regarding
        optimization strategies.
        
      - :doc:`Current Operation Reporting </reference/current-op>`
