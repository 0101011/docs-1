=============
$centerSphere
=============

.. default-domain:: mongodb

.. operator:: $centerSphere

   .. versionadded:: 1.8

   The :operator:`$centerSphere` operator is the spherical equivalent
   of the :operator:`$center` operator. :operator:`$centerSphere` uses
   spherical geometry to define a circle for use by the
   :operator:`$within` operator in :term:`geospatial` queries.

   To define the bounds of a query using :operator:`$centerSphere`, you
   must specify:

   - The center point

   - The radian. To calculate the radian, divide the radius of
     the circle by the radius of the sphere.

      db.collection.find( { loc: { $within: { $centerSphere: [ [0,0], 10 / 3959 ] } } } )

   The following example returns all documents within a 10 mile radius
   of longitude ``88 W`` and latitude ``30 N``. The document determines
   the radian by dividing 10 miles by the approximate radius of the earth:
   3960 miles.

   .. code-block:: javascript

      db.collection.find( { loc: { $within: { $centerSphere: [ [ 88 , 30 ], 10 / 3960 ] } } } )

   .. include:: /includes/note-geospatial-index-must-exist.rst
