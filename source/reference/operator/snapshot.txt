=========
$snapshot
=========

.. default-domain:: mongodb

.. operator:: $snapshot

   The :operator:`$snapshot` operator prevents the cursor from
   returning a document more than once because an intervening write
   operation results in a move of the document.

   Even in snapshot mode, objects inserted or deleted during the
   lifetime of the cursor may or may not be returned.

   Use one of the following forms:

   .. code-block:: javascript

      db.collection.find()._addSpecial( "$snapshot", true )
      db.collection.find( { $query: {}, $snapshot: true } )

   The JavaScript function :method:`cursor.snapshot()` provides equivalent
   functionality in the :program:`mongo` shell. See the following
   example, which is equivalent to the above:

   .. code-block:: javascript

      db.collection.find().snapshot()

   The :operator:`$snapshot` operator traverses the index on the
   ``_id`` field. Do **not** use :operator:`$snapshot` with
   :operator:`$hint` or :operator:`$orderby` (:method:`cursor.sort()`.)
