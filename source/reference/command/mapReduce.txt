=========
mapReduce
=========

.. default-domain:: mongodb

.. dbcommand:: mapReduce

   The :dbcommand:`mapReduce` command allows you to run
   :term:`map-reduce` aggregations over a collection.

   .. code-block:: javascript

      db.runCommand(
                     { 
                       mapreduce: '<collection>',
                       map: <map>,
                       reduce: <reduce>,
                       out: <out>,
                       query: <query>,
                       sort: <sort>,
                       limit: <limit>,
                       finalize: <finalize>,
                       scope: <scope>,
                       jsMode: <jsMode>,
                       verbose: <verbose>
                       
                     }
                   )

   In addition to specifying the ``<collection>`` over which to perform
   the ``mapreduce`` command, the command accepts the following:
   
   .. include:: /includes/parameters-map-reduce.rst

   .. include:: /includes/examples-map-reduce.rst
      :start-after: map-reduce-examples-begin
      :end-before: map-reduce-document-prototype-end

   - .. include:: /includes/examples-map-reduce.rst
        :start-after: map-reduce-sum-price
        :end-before: map-reduce-sum-price-wrapper-begin

     .. include:: /includes/examples-map-reduce.rst
             :start-after: map-reduce-sum-price-cmd-begin
             :end-before: map-reduce-sum-price-cmd-end
     
   - .. include:: /includes/examples-map-reduce.rst
        :start-after: map-reduce-item-counts
        :end-before: map-reduce-item-counts-avg-end

     .. include:: /includes/examples-map-reduce.rst
        :start-after: map-reduce-item-counts-avg-cmd-begin
        :end-before: map-reduce-item-counts-avg-cmd-end

   .. seealso:: :method:`mapReduce()` and :term:`map-reduce`.

      The :doc:`Map-Reduce </applications/map-reduce>` 
      provides a greater overview of MongoDB's map-reduce
      functionality. Consider the :wiki:`Simple application
      <Aggregation>` support for basic aggregation operations as well
      as :doc:`/applications/aggregation`.

   .. slave-ok
