========
addShard
========

.. default-domain:: mongodb

.. dbcommand:: addShard

   :option name: Optional. Unless specified, a name will be
                 automatically provided to uniquely identify
                 the shard.

   :option maxSize: Optional. Unless specified, shards will consume
                    the total amount of available space on their
                    machines if necessary. Use the ``maxSize`` value
                    to limit the amount of space the database can
                    use. Specify this value in megabytes.

   Use this method to add a database instance or replica set to a
   :term:`sharded cluster`.
   You must run this command against a :program:`mongos` instance.
   The command takes the following form:

   .. code-block:: javascript

      { addShard: "<hostname>:<port>" }

   Replace ``<hostname>:<port>`` with the hostname and port of the
   database instance you want to add as a shard.

   If the database instance is a member of a replica set, you must specify
   the replica set name and at least one member of the replica set:

   .. code-block:: javascript

      { addShard: "replica-set/hostname:port" }

   Send this command to only one :program:`mongos` instance, it will
   store shard configuration information in the :term:`config database`.

   .. note::

      Specify a ``maxSize`` when you have machines with different disk
      capacities, or if you want to limit the amount of data on some
      shards.

      The ``maxSize`` constraint prevents the :term:`balancer` from
      migrating chunks to the shard when the value of
      :status:`mem.mapped` exceeds the value of ``maxSize``.


   .. seealso::

      :method:`sh.addShard()`,
      :doc:`/administration/sharding`,
      :doc:`/tutorial/add-shards-to-shard-cluster.txt`,
      :doc:`/tutorial/remove-shards-from-cluster.txt`
