====================================
Connection Pool Statistics Reference
====================================

.. default-domain:: mongodb

Synopsis
--------

:program:`mongos` instances maintain a pool of connections for
interacting with the constituent members of the :term:`shard clusters
<shard cluster>`. The :dbcommand:`connPoolStats` command returns
statistics regarding these connections between :program:`mongod` and
:program:`mongos`

.. include:: /includes/note-conn-pool-stats

Output
------

.. stats:: hosts

   :stats:`hosts` contains a document for every :program:`mongod`
   member that is connected to the :program:`mongos`.

.. stats:: hosts.[host].available

   :stats:`hosts.[host].available` reports the total number of
   connections created by the :program:`mongos`, and used to connect
   to members of the :term:`shard cluster`.

.. stats:: hosts.[host].created

   :stats:`hosts.[host].created` reports the number of connections
   that has ever been created for this host by the :program:`mongos`.

.. stats:: replicaSets

   :stats:`replicaSets` is a :term:`document` that contains detailed
   :term:`replica set` information for the :term:`shard cluster`.

   .. stats:: replicaSets.shard

      The :stats:`replicaSets.shard` :term:`document` reports details
      on each shard within the :term:`replica set`.

   .. stats:: replicaSets.[shard].host

      This :stats:`replicaSets.[shard].host` :term:`document` gives
      details on each host within the shard in the :term:`replica
      set`.

      These values derive from the :doc:`replica set status
      </reference/replica-status>` values.

      .. stats:: replicaSets.[shard].[host].addr

         :stats:`replicaSets.[shard].[host].addr` reports the address
         for the host in the :term:`shard cluster` in the format of
         "``[hostname]:[port]``".

      .. stats:: replicaSets.[shard].[host].ok

         :stats:`replicaSets.[shard].[host].ok` reports ``false``
         when:

	    - :program:`mongos` cannot connect to this member.

            - an error occurred on this member.

      .. stats:: replicaSets.[shard].[host].ismaster

         :stats:`replicaSets.[shard].[host].ismaster` reports if this
         host is the :term:`master` member of the :term:`replica set`.

      .. stats:: replicaSets.[shard].[host].hidden

         :stats:`replicaSets.[shard].[host].hidden` reports if this
         host is a :term:`hidden member` of the :term:`replica set`.

      .. stats:: replicaSets.[shard].[host].secondary

         :stats:`replicaSets.[shard].[host].secondary` reports if this
         host is a :term:`secondary` member of the :term:`replica set`.

      .. stats:: replicaSets.[shard].[host].pingTimeMillis

         :stats:`replicaSets.[shard].[host].pingTimeMillis` reports
         the ping time in miliseconds from the :program:`mongos` to
         the :stats:`replicaSets.[shard].host`.

   .. stats:: replicaSets.[shard].master

      :stats:`replicaSets.[shard].master` reports the number of the
      host that is the :term:`master` of the :term:`replica set` from the
      :stats:`replicaSets.[shard].host` list.

   .. stats:: replicaSets.[shard].nextSlave

      :stats:`replicaSets.[shard].nextSlave` reports which
      :term:`secondary` member to use when servicing a new request
      from a new connection.

      .. note::

         This field is only used for debugging and is depreciated.
      
.. stats:: createdByType

   :stats:`createdByType` :term:`document` reports the number of each
   type of connection that :program:`mongos` has created in all
   connection pools.

   .. stats:: createdByType.master

      :stats:`createdByType.master` reports the total number of
      connections created to connect to :term:`master` members in the
      :term:`shard cluster`.

   .. stats:: createdByType.set

      :stats:`createdByType.set` reports the total number of
      connections created to connect to a :term:`replica set` member.

   .. stats:: createdByType.sync

      :stats:`createdByType.sync` reports the total number of
      connections created to connect to the :term:`config database`.

.. stats:: totalAvailable

   :stats:`totalAvailable` reports the running total of connections
   from :program:`mongos` to all :program:`mongod` in the :term:`shard
   cluster`

.. stats:: totalCreated

   :stats:`totalCreated` reports the total number of connections ever
   created from :program:`mongos` to all :program:`mongod` in the
   :term:`shard cluster`.

.. stats:: numDBClientConnection

   :stats:`numDBClientConnection` reports the number of normal client
   connections created from :program:`mongos` to all :program:`mongod`
   in the :term:`shard cluster`.

.. stats:: numAScopedConnection

   :stats:`numAScopedConnection` reports the number of exception safe
   connections created from :program:`mongos` to all :program:`mongod`
   in the :term:`shard cluster`. These connections will be released
   from :program:`mongos` when there is an exception thrown in
   MongoDB.
