:orphan:

=================
Command Reference
=================

.. default-domain:: mongodb

.. TODO make introduction more accessible

This document contains a reference to all :term:`database commands
<database command>`.

The MongoDB command interface provides access to all :term:`non CRUD
<crud>` database operations. Fetching server stats, initializing a
replica set, and running a map-reduce job are all accomplished by
running a command.

You specify a command first by constructing a standard :term:`BSON`
document whose first key is the name of the command. For example,
specify the :dbcommand:`isMaster` command using the following
:term:`BSON` document:

.. code-block:: javascript

   { isMaster: 1 }

To execute this command, you send this document as a query on the
special :term:`$cmd` collection:

.. code-block:: javascript

   db.$cmd.findOne( {isMaster: 1} )

The JavaScript shell (i.e. :program:`mongo`,) provides a helper method for
running commands. Thus, you can also run the above command like so:

.. code-block:: javascript

   db.runCommand( { isMaster: 1 } )

Many commands have their own shell helpers:

.. code-block:: javascript

   db.isMaster();

You must run some commands on the ``admin`` database. Normally, that
looks like this:

.. code-block:: javascript

   use admin
   db.runCommand( {buildInfo: 1} )

However, there's also a command helper that automatically switches to
this database:

.. code-block:: javascript

   db._adminCommand( {buildInfo: 1} )

The ``_adminCommand`` helper is shorthand for
``db.getSisterDB("admin").runCommand();``.

All commands return, at minimum, a document with an ``ok`` field
indicating whether the command has succeeded:

.. code-block:: javascript

   { 'ok': 1 }

If the command fails, the value of ``ok`` will be 0.

In the command descriptions below, we provide the document template
for each command. In some cases, we also show the relevant :program:`mongo`
shell helpers.

User Commands
-------------

Sharding
~~~~~~~~

.. seealso:: :doc:`/sharding` for more information about MongoDB's
   sharding functionality.

.. include:: command/add-shard.txt
   :start-after: mongodb

.. include:: command/list-shards.txt
   :start-after: mongodb

.. include:: command/enable-sharding.txt
   :start-after: mongodb

.. include:: command/shard-collection.txt
   :start-after: mongodb

.. include:: command/sharding-state.txt
   :start-after: mongodb

.. include:: command/remove-shard.txt
   :start-after: mongodb

.. include:: command/print-sharding-status.txt
   :start-after: mongodb

Aggregation
~~~~~~~~~~~

.. include:: command/group.txt
   :start-after: mongodb

.. include:: command/count.txt
   :start-after: mongodb

.. include:: command/map-reduce.txt
   :start-after: mongodb

.. include:: command/find-and-modify.txt
   :start-after: mongodb

.. include:: command/distinct.txt
   :start-after: mongodb

.. include:: command/eval.txt
   :start-after: mongodb

.. include:: command/aggregate.txt
   :start-after: mongodb

Replication
~~~~~~~~~~~

.. seealso:: ":doc:`/core/replication`" for more information regarding
   replication.

.. include:: command/resync.txt
   :start-after: mongodb

.. include:: command/repl-set-freeze.txt
   :start-after: mongodb

.. include:: command/repl-set-get-status.txt
   :start-after: mongodb

.. include:: command/repl-set-initiate.txt
   :start-after: mongodb

.. include:: command/repl-set-reconfig.txt
   :start-after: mongodb

.. include:: command/repl-set-sync-from.txt
   :start-after: mongodb

Geospatial Commands
~~~~~~~~~~~~~~~~~~~

.. include:: command/geo-near.txt
   :start-after: mongodb

.. include:: command/geo-search.txt
   :start-after: mongodb

Collections
~~~~~~~~~~~

.. include:: command/drop.txt
   :start-after: mongodb

.. include:: command/clone-collection.txt
   :start-after: mongodb

.. include:: command/create.txt
   :start-after: mongodb

.. include:: command/convert-to-capped.txt
   :start-after: mongodb

.. include:: command/empty-capped.txt
   :start-after: mongodb

.. include:: command/coll-stats.txt
   :start-after: mongodb

.. include:: command/rename-collection.txt
   :start-after: mongodb

.. include:: command/coll-mod.txt
   :start-after: mongodb

Administration
~~~~~~~~~~~~~~

.. include:: command/touch.txt
   :start-after: mongodb

.. include:: command/fsync.txt
   :start-after: mongodb

.. include:: command/drop-database.txt
   :start-after: mongodb

.. include:: command/drop-indexes.txt
   :start-after: mongodb

.. include:: command/clone.txt
   :start-after: mongodb

.. include:: command/repair-database.txt
   :start-after: mongodb

.. include:: command/shutdown.txt
   :start-after: mongodb

.. include:: command/copy-db.txt
   :start-after: mongodb

.. include:: command/logout.txt
   :start-after: mongodb

.. include:: command/log-rotate.txt
   :start-after: mongodb

.. include:: command/set-parameter.txt
   :start-after: mongodb

.. include:: command/get-parameter.txt
   :start-after: mongodb

Diagnostics
~~~~~~~~~~~

.. include:: command/db-stats.txt
   :start-after: mongodb

.. include:: command/conn-pool-stats.txt
   :start-after: mongodb

.. include:: command/get-cmd-line-opts.txt
   :start-after: mongodb

.. include:: command/validate.txt
   :start-after: mongodb

.. include:: command/top.txt
   :start-after: mongodb

.. include:: command/get-last-error.txt
   :start-after: mongodb

.. include:: command/get-log.txt
   :start-after: mongodb

.. include:: command/list-databases.txt
   :start-after: mongodb

.. include:: command/cursor-info.txt
   :start-after: mongodb

.. include:: command/is-master.txt
   :start-after: mongodb

.. include:: command/ping.txt
   :start-after: mongodb

.. include:: command/server-status.txt
   :start-after: mongodb

.. include:: command/reset-error.txt
   :start-after: mongodb

.. include:: command/get-prev-error.txt
   :start-after: mongodb

.. include:: command/force-error.txt
   :start-after: mongodb

.. include:: command/profile.txt
   :start-after: mongodb

.. include:: command/list-commands.txt
   :start-after: mongodb

Other Commands
~~~~~~~~~~~~~~

.. include:: command/reindex.txt
   :start-after: mongodb

.. include:: command/filemd5.txt
   :start-after: mongodb

:program:`mongos` Commands
--------------------------

.. include:: command/flush-router-config.txt
   :start-after: mongodb

.. include:: command/is-db-grid.txt
   :start-after: mongodb

.. include:: command/move-primary.txt
   :start-after: mongodb

.. include:: command/split.txt
   :start-after: mongodb

Internal Use
------------

.. include:: command/available-query-options.txt
   :start-after: mongodb

.. include:: command/close-all-databases.txt
   :start-after: mongodb

.. include:: command/netstat.txt
   :start-after: mongodb

.. include:: command/set-shard-version.txt
   :start-after: mongodb

.. include:: command/get-shard-version.txt
   :start-after: mongodb

.. include:: command/unset-sharding.txt
   :start-after: mongodb

.. include:: command/whats-my-uri.txt
   :start-after: mongodb

.. include:: command/features.txt
   :start-after: mongodb

.. include:: command/driver-oid-test.txt
   :start-after: mongodb

.. include:: command/diag-logging.txt
   :start-after: mongodb

.. include:: command/copy-db-get-nonce.txt
   :start-after: mongodb

.. include:: command/db-hash.txt
   :start-after: mongodb

.. include:: command/median-key.txt
   :start-after: mongodb

.. include:: command/geo-walk.txt
   :start-after: mongodb

.. include:: command/sleep.txt
   :start-after: mongodb

.. include:: command/get-nonce.txt
   :start-after: mongodb

.. include:: command/get-op-time.txt
   :start-after: mongodb

.. include:: command/god-insert.txt
   :start-after: mongodb

.. include:: command/clean.txt
   :start-after: mongodb

.. include:: command/apply-ops.txt
   :start-after: mongodb

.. include:: command/repl-set-elect.txt
   :start-after: mongodb

.. include:: command/repl-set-get-rbid.txt
   :start-after: mongodb

.. include:: command/repl-set-heartbeat.txt
   :start-after: mongodb

.. include:: command/repl-set-fresh.txt
   :start-after: mongodb

.. include:: command/repl-set-test.txt
   :start-after: mongodb

.. include:: command/write-backs-queued.txt
   :start-after: mongodb

.. include:: command/conn-pool-sync.txt
   :start-after: mongodb

.. include:: command/check-sharding-index.txt
   :start-after: mongodb

.. include:: command/get-shard-map.txt
   :start-after: mongodb

.. include:: command/split-chunk.txt
   :start-after: mongodb

.. include:: command/move-chunk.txt
   :start-after: mongodb

.. include:: command/write-back-listen.txt
   :start-after: mongodb

.. include:: command/data-size.txt
   :start-after: mongodb

.. include:: command/authenticate.txt
   :start-after: mongodb

.. include:: command/handshake.txt
   :start-after: mongodb

.. include:: command/map-reduce-sharded-finish.txt
   :start-after: mongodb

.. include:: command/is-self.txt
   :start-after: mongodb

.. include:: command/migrate-clone.txt
   :start-after: mongodb

.. include:: command/recv-chunk-abort.txt
   :start-after: mongodb

.. include:: command/recv-chunk-commit.txt
   :start-after: mongodb

.. include:: command/recv-chunk-status.txt
   :start-after: mongodb

.. include:: command/recv-chunk-start.txt
   :start-after: mongodb

.. include:: command/skew-clock-command.txt
   :start-after: mongodb

.. include:: command/test-dist-lock-with-skew.txt
   :start-after: mongodb

.. include:: command/test-dist-lock-with-sync-cluster.txt
   :start-after: mongodb

.. include:: command/transfer-mods.txt
   :start-after: mongodb
