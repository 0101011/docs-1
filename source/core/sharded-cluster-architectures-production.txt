.. _sharding-production-architecture:

===============================
Production Cluster Architecture
===============================

.. default-domain:: mongodb

In a production cluster, you must ensure that data is redundant and that
your systems are highly available. To that end, a production-level
cluster must have the following components:

- Three :ref:`config servers <sharding-config-server>`. Each config
  server resides on a separate machine. A single :term:`sharded
  cluster` must have exclusive use of its :ref:`config servers
  <sharding-config-server>`. If you have multiple sharded clusters, you
  will need to have a group of config servers for each cluster.

- Two or more :term:`replica sets <replica set>` to serve as
  :term:`shards <shard>`. For information on replica sets, see
  :doc:`/replication`.

- Two or more :program:`mongos` instances as routers. Typically, you
  deploy a single :program:`mongos` instance on each application
  server. Alternatively, you may deploy several :program:`mongos`
  instances and use a load balancer in front. Applications connect to
  the load balancer which then selects a :program:`mongos`.

.. include:: /images/sharded-cluster-production-architecture.rst
