========
ObjectId
========

:term:`ObjectId <objectid>` is a 12-byte :term:`BSON` type that consists of:

- 4-byte timestamp
- 3-byte machine id
- 2-byte process id
- 3-byte counter

In MongoDB, documents stored in a collection require a unique
:term:`_id` field that acts as a :term:`primary key`. Because
``ObjectIds`` are small, most likely unique, and fast to generate,
MongoDB uses ``ObjectIds`` as the default value for the ``_id`` field
if the ``_id`` field is not specified.

If a document is missing the ``_id`` field during a create
operation, the :program:`mongod` adds the ``_id`` field and generates a
unique ``ObjectId`` to assign as its value.

ObjectId()
----------

MongoDB provides the ``ObjectId()`` wrapper class in the :program:`mongo`
shell. The ``ObjectId()`` class can generate a new ``ObjectId`` and provide
the following helper attribute and methods:

- ``str``

   The hexadecimal string value of the ObjectID() object.

- ``toString() <ObjectId.toString()>``

   Returns the string representation of the ObjectId() object. The
   returned string literal has the format "ObjectId(...)".

   Prior to version 2.2, returns the value of the object as a
   hexadecmial string.
   
- ``valueOf() <ObjectId.valueOf()>``

   Returns the value of the ObjectId() object as a hexadecimal string.
   The returned string is the ``str`` attribute.

   Prior to version 2.2, returns the string literal "ObjectId(...)"

Consider the following usage of the ObjectID() class in the :program:`mongo`
shell:

- Generate a new ObjectId() using the constructor with no argument:

  .. code-block:: javascript

     > x = ObjectId()

     ObjectId("507f1f77bcf86cd799439011")

- Generate a new ObjectId() using the constructor with a unique hexadecimal string:

  .. code-block:: javascript

     > y = ObjectId("507f191e810c19729de860ea")

     ObjectId("507f191e810c19729de860ea")

- Access the ``str`` attribute of an ObjectId() object:

  .. code-block:: javascript

     > y.str

     507f191e810c19729de860ea

- Get the string representation of an ObjectId() object:

  .. code-block:: javascript

     > y.toString()

     ObjectId("507f191e810c19729de860ea")

- Get the value of an ObjectId() object as a hexadecimal string:

  .. code-block:: javascript

     > y.valueOf()

     507f191e810c19729de860ea
