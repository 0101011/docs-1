===============
Find/Query Data
===============

.. default-domain:: mongodb

Overview
--------

Use the :method:`~db.collection.find()` method to issue a query to
retrieve data from a collection in MongoDB. All queries in MongoDB have
the scope of a single :term:`collection`. You can specify query
conditions to limit the result set to matching documents.

MongoDB returns query results in a :term:`cursor`, which is an iterable
object that yields documents.

Prerequisite
------------

The examples in this section query the ``inventory`` collection in the
``test`` database. To populate the collection, see
:doc:`/tutorial/prerequisite`.

.. include:: /includes/fact-id-values-generated.rst

Examples
--------

Queries can return all documents in a collection or only the documents
that match a specified criteria or conditions. You can specify the
criteria in a document and pass as a parameter to the
:method:`~db.collection.find()` method.

Query for All Documents in a Collection
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To return all documents in a collection, call the
:method:`~db.collection.find()` method *without* a criteria document.

.. include:: /includes/examples/example-gs-query-all.rst

.. note::
   Although the :method:`~db.collection.find()` method returns a
   cursor, the :program:`mongo` shell automatically iterates the cursor
   up to 20 times to print the documents. For more information on
   cursors, see :manual:`/core/cursors`.

Specify Equality Conditions
~~~~~~~~~~~~~~~~~~~~~~~~~~~

The query condition for an equality match on a field has the following
form: 

.. code-block:: javascript

   { <field1>: <value1>, ... }

If the ``<field>`` is a top-level field and *not* a field in an
embedded document or an array, you can either enclose the field name in
quotes or omit the quotes. If using :term:`dot notation`, you must
enclose the dotted name in quotes.

.. include:: /includes/examples/example-gs-query-equality.rst

Specify Conditions with Operators
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MongoDB provides operators to specify query conditions, such as
:manual:`comparison operators </reference/operators/query-comparison>`.
Although there are some exceptions, such as the :query:`$or` and
:query:`$and` conditional operators, query conditions using operators
generally have the following form: ``{ <field>: { <operator>: <operand>
} }``.

For a complete list of the operators, see :manual:`query operators
</reference/operator/query>`.

.. include:: /includes/examples/example-gs-query-operators.rst

Sort Query Results
~~~~~~~~~~~~~~~~~~

.. include:: /includes/examples/example-gs-query-sort.rst

Additional Information
----------------------

See the following documents in the MongoDB Manual for more information
on querying:

- :method:`db.collection.find()` Reference Page

- :manual:`/tutorial/query-documents` Tutorial

- :manual:`/tutorial/project-fields-from-query-results>` Tutorial

- :manual:`Query and Projection Operators </reference/operator/query>`

- :manual:`Cursor Methods </reference/method/js-cursor>`
